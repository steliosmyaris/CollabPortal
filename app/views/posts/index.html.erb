<h1>Posts</h1>

<%= search_form_for @q do |f| %>
  <%= f.search_field :title_or_content_cont, placeholder: "Search posts..." %>
  <%= f.select :category_eq, ["Networks", "Databases", "Algorithms", "Software Engineering", "Other"], include_blank: "All Categories" %>
  <%= f.submit "Search" %>
<% end %>

<%= link_to "New Post", new_post_path %>

<% @posts.each do |post| %>
  <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
    <h3><%= link_to post.title, post %></h3>
    <p><strong>Category:</strong> <%= post.category %></p>
    <p><%= post.content %></p>
    <p><small>Posted by <%= post.user.email %></small></p>
    <% if post.user != current_user %>
      <%= link_to "Add Contact", contacts_path(contact_id: post.user.id), data: { turbo_method: :post } %>
    <% end %>
    <% if post.user == current_user %>
      <%= link_to "Edit", edit_post_path(post) %> |
      <%= link_to "Delete", post, data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } %>
    <% end %>
  </div>
<% end %>